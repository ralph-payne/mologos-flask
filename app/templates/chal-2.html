{% extends "base.html" %}

{% block title %}: Challenge{% endblock %}

{% block page_content %}

<div class="inner-container">

    <style>
        .flag-container {
            padding-top: 20px;
        }
        .word-success {
            color: green;
        }
        .word-fail {
            color: red;
        }

        .table-challenge-page {

        }
        .table-cell {

        }
        .table-row {

        }
        .table-heading {

        }
    </style>
        
    <div class="flag-container">
        {% for language in language_codes %}
            {% if language.active %}
                {{ macros.generate_flag(endpoint=endpoint, country=language.code, filename=language.filename) }}
            {% endif %}
        {% endfor %}
    </div>
        
    {% if words %}
        {% if english %}<div class="challenge-table-english">{% else %}<div class="challenge-table-foreign">{% endif %}
            <form class="challenge-form" action="/challenge/{{ lng.code }}" method="POST">
                <table>
                    <thead>
                        <tr>
                            <th>Example</th>
                            <th>{% if english %} {% else %} {{ lng.lng_eng }} / {{ lng.lng_src }} </th><th> {% endif %}</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for word in words %}
                            {% if english %}
                            <tr>
                                <td>
                                    <input type="hidden" name="word_id" value="{{ word.id }}">
                                    <input type="hidden" name="target_word" value="{{ word.target_word }}">
                                    <input type="hidden" name="star_boolean" value="0">
                                    <input type="hidden" name="eye_boolean" value="0">
                                    {{ word.first_half_sentence[0]|upper}}{{word.first_half_sentence[1:]}}
                                    <input id="user-guess" type="text" name="user_guess" placeholder="write guess...">
                                    {{ word.second_half_sentence }}
                                </td>
                                <td><span class="word-success">{{ word.success }}</span> v <span class="word-fail">{{ word.fail }}</span></td>
                                <td><a id="{{ word.id }}-eye-icon" href="#"><i class="fa fa-eye-slash fa-2x"
                                            onclick="toggleColor(this)"></i></a></td>
                                <td><a id="{{ word.id }}-star-icon" href="#" onclick="toggleColor(this)"><i
                                            class="fa fa-star fa-2x"></i></a></td>
                            </tr>
                            {% else %}
                            <tr>
                                <td>
                                    <!-- Word in English -->
                                    {{ word.word }}
                                </td>
                                <td>
                                    <input type="hidden" name="word_id" value="{{ word.id }}">
                                    <!-- Translated Word (target_word) -->
                                    <input type="hidden" name="target_word" value="{{ word.example }}">
                                    <input type="hidden" name="word-in-english" value="{{ word.word }}">
                                    <input type="hidden" name="eye_boolean" value="0">
                                    <input type="hidden" name="star_boolean" value="0">
                                    <input id="user-guess" type="text" name="user_guess" placeholder="write guess...">
                                </td>
                                <td>{{ word.success }} v {{ word.fail }}</td>                                
                                <td><a id="{{ word.id }}-eye-icon" href="#"><i class="fa fa-eye-slash fa-2x"
                                            onclick="toggleColor(this)"></i></a></td>
                                <td><a id="{{ word.id }}-star-icon" href="#" onclick="toggleColor(this)"><i
                                            class="fa fa-star fa-2x"></i></a></td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>

                <style>
                .submit-btn-challenge {
                    cursor: pointer;
                    background-color: #48954e;
                    color: #fff;
                    padding: 0.5rem 1.5rem;
                    border-radius: .25rem;             
                }
                </style>

                <div class="submit-btn-wrapper-challenge">
                    <button class="submit-btn-challenge" type="submit">Submit</button>
                </div>
            </form>
        </div>
        {% else %}
            {{ macros.no_saved_words_message(endpoint=endpoint, language=lng.code, is_english=english) }}
        {% endif %}
    </div>

<!-- Script for Changing Color of Star and Eye-->
<script type="text/javascript">
    const toggleColor = (e) => {
        // Remove style if it already has it
        if (e.classList.contains("icon-selected")) {
            e.classList.remove("icon-selected");
        } else {
            e.classList.add("icon-selected");
        }
    }
</script>

{% endblock %}