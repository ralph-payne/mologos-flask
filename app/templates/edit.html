{% extends "base.html" %}

{% block title %}Edit {{ word.word }} {% endblock %}

{% block page_content %}

<div class="inner-container">
    <form action="{{ url_for('main.edit', id=word.id, lng=lng.code) }}" method="POST">
    
    <div id="edit-grid">
        {% if word.word %}
            <div class="edit-article">
                <section id="top-definitions-section">
                    <div class="defined-word-container">
                        <h1 name="defined-word" class="defined-word-content">{{ word.word }}</h1>
                        <hr>
                        {{ lng.lng_src }}
                        <hr>
                        {{ word.example }}
                    </div>

                    {% if word_details %}
                    <div class="pron-ipa-container">
                        <span class="pron-ipa-content">/{{ word_details.pronunciation }}/<span>
                    </div>

                    <div>
                        {{ definition.definition }}
                    </div>
                    <small>
                        {{ word_details.etymology }}
                    </small>
                    <div>
                        <p><a class="link-color" href="{{ url_for('main.define', word=word.word) }}">Examples</a></p>
                    </div>

                    {% endif %}

                </section>
            </div>
        {% else %}
            <div class="edit-article">
                <section id="top-definitions-section">
                    <div class="defined-word-container">
                        <h1 name="defined-word" class="defined-word-content">{{ word.translation }}</h1>
                        <h1 name="defined-word" class="defined-word-content">{{ word.output }}</h1>
                        <h1 name="defined-word" class="defined-word-content">{{ word.example }}</h1>
                        <h1 name="defined-word" class="defined-word-content">{{ word.user_id }}</h1>
                        <h1 name="defined-word" class="defined-word-content">{{ word.dst}}</h1>
                        <h1 name="defined-word" class="defined-word-content">{{ word.input}}</h1>

                        Look into what is saved when you add it to the dictionary
                    </div>
                    <div class="pron-ipa-container">
                        <span class="pron-ipa-content">/ɡɒlf/<span>
                    </div>
                    <hr>
                </section>
            </div>
        {% endif %}

        <div class="edit-article">
            <div class="icon-container">
                <div class="tooltip">
                    <a><i class="fa fa-eye-slash fa-2x {% if word.ignored %}icon-selected{% endif %}" onclick="toggleColor(this)"></i></a>
                    <input type="hidden" id="eye-boolean" name="eye_boolean" value="0">
                    <span class="tooltiptext">Hide From Challenges</span>
                </div>

                <div class="tooltip">
                    <a><i class="fa fa-star fa-2x {% if word.starred %}icon-selected{% endif %}" onclick="toggleColor(this)"></i></a>
                    <input type="hidden" id="star-boolean" name="star_boolean" value="{% if word.starred %}1{% else %}0{% endif %}">
                    <span class="tooltiptext">Mark as Important</span>
                </div>

                <div class="tooltip">
                    <a href="{{ url_for('main.delete', id=word.id, lng=lng.code) }}"><i class="fa fa-trash fa-2x"></i></a>
                    <span class="tooltiptext">Delete</span>
                </div>
            </div>
        </div>

        <div class="edit-article">

            {% if word.word %}
                <div id="definition-example">
                    {% if definition %}<h3>Example</h3>{% else %}<h3>Edit Translation</h3>{% endif %}
                    <textarea type="text" name="edited-example">{{ word.example }}</textarea>
                </div>
            {% else %}
                <div id="definition-example">
                    <textarea type="text" name="edited-example">{{ word.output }}</textarea>
                </div>
            {% endif %}
            <button class="btn btn-primary" type="submit">Edit and Update</button>
        </div>


        <div class="edit-article">
            <div class="statistics-container">
                <h3>Statistics</h3>
                <ul>
                    <li>Created: {{ moment(word.created).format('D MMM YYYY') }} </li>
                    {% if word.last_modified %}
                    <li>Last Modified: {{ moment(word.last_modified).format('D MMM YYYY') }} </li>
                    {% endif %}
                    <li>Attempts: {{ word.attempt }} </li>
                    <li>Correct: {{ word.success }} </li>
                    <li>Incorrect: {{ word.fail }} </li>
                </ul>
            </div>
        </div>

    </div>
    </form>
</div>

<!-- Script for Changing Color of Star and Eye-->
<script type="text/javascript">

    let starBoolean = document.getElementById('star-boolean')
    let eyeBoolean = document.getElementById('eye-boolean')

    function toggleColor(e) {
        // Remove style if it already has it
        if (e.classList.contains("icon-selected")) {
            e.classList.remove("icon-selected");
            // Change the value of the hidden input to zero
            if (e.classList.contains("fa-eye-slash")) {
                eyeBoolean.value = 0;
            } else {
                starBoolean.value = 0;
            }
            
        } else {
            e.classList.add("icon-selected");

            if (e.classList.contains("fa-eye-slash")) {
                eyeBoolean.value = 1;
            } else {
                starBoolean.value = 1;
            }
        }
    }
</script>

{% endblock %}