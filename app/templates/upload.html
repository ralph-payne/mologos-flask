{% extends "base.html" %}

{% block title %}: Upload{% endblock %}

{% block page_content %}

{% include 'partials/_flashes.html' %}

Upload your own examples
<hr>
Each example should appear on a newline


<style>
    .upload-form-grid {
        display: grid;
        grid-template-columns: 3fr 4fr;
        grid-template-rows: 1fr 6fr 2fr;
        grid-gap: 10px;
    }
    .upload-1 {
        grid-column-start: 1;
		grid-column-end: 4;
    }
    .upload-text-area {
        background-color: #f3f3f3;
        height: 300px;
        width: 600px;
        display: block;
    }
    .upload-examples-btn-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 50px;
    }
    .optional-target-words-text-area {
        background-color: #f3f3f3;
        height: 300px;
        width: 200px;
        display: block;
    }
</style>


{% if is_english %}
<form class="upload-form" action="/upload_english/" method="POST">
{% else %}
<form class="upload-form" action="/upload_translations/" method="POST">
{% endif %}
    <input type="hidden" id="most-recent-translation-lang" name="most_recent_translation_lang" value="{{ lng_recent }}">
    <div class="upload-form-grid">
        <div class="upload-1">
            <div id="language-select-container" class="language-select-container flex-container" style="display: none;">
                <div class="inner-lang-select">
                    <input type="hidden" id="usr-recent-lang" value="{{ lng_recent}}">
                    <label for="select-language"><strong>Language</strong></label>
                    <select name="select_language" id="select-language" onchange="changeHiddenInputToLanguageSelected(this)">
                    {% for language in language_codes %}
                        {% if language.active %}
                            <option value="{{ language.code }}">{{ language.lng_eng }}</option>
                        {% endif %}
                    {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        <div class="upload-2">
            <textarea type="text" name="upload_text_area" id="upload-text-area" class="upload-text-area"></textarea>
            <div class="upload-examples-btn-wrapper">
                <button class="btn btn-primary" type="submit">
                    Upload Examples
                    {% if is_english %}
                        engi
                        {{ is_english }}
                    {% else %}
                        forish
                        {{ is_english }}
                    {% endif %}
                </button>
            </div>
        </div>
        <div class="upload-3">
            <textarea name="upload_target_word_area_12321" type="text" class="optional-target-words-text-area"></textarea>
        </div>

    </div>
</form>


<!-- Script which grabs most recent language and updates the select value -->
<script>
    // Get Most recent language from hidden input
    const mostRecentLanguage = document.getElementById("most-recent-translation-lang").value;

    // Declare function
    const selectFromOptions = (selectId, optionValToSelect) => {
        //Get the select element by it's unique ID.
        const selectElement = document.getElementById(selectId);
        //Get the options.
        const selectOptions = selectElement.options;
        //Loop through these options using a for loop.
        for (let option, i = 0; option = selectOptions[i]; i++) {
            //If the option of value is equal to the option we want to select.
            if (option.value == optionValToSelect) {
                //Select the option and break out of the for loop.
                selectElement.selectedIndex = i;
                break;
            }
        }
    }

    // Call function
    selectFromOptions("select-language", mostRecentLanguage)

    // Display the block which was previously hidden (This prevents stutterly loading)
    document.getElementById("language-select-container").style.display = "block";
</script>


<!-- Script which listens for when the select element gets changed and then updates the hidden value -->
<script>
    const changeHiddenInputToLanguageSelected = (element) => {
        let hiddenElementToSendToServer = document.getElementById("most-recent-translation-lang").value;

        hiddenElementToSendToServer = element.value;

    }
</script>

<!-- End of page_content -->
{% endblock %}
