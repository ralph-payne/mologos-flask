{% extends "base.html" %}{% block title %}: Upload{% endblock %}{% block page_content %}

{% include 'partials/_flashes.html' %}

<div>
    <p class="instructions-for-user">Upload your own examples.</p>
    <p class="instructions-for-user">Each example should appear on a newline.</p>
</div>

<div class="upload-form-container">
    <!-- Make it so that this only goes to one route -->
    <form id="bulk-upload-form" class="upload-form" action="{% if is_english %}/upload_english/{% else %}/upload_translations/{% endif %}" method="POST">
    
    <input type="hidden" id="most-recent-translation-lang" name="most_recent_translation_lang" value="{{ lng_recent }}">
    
    <div class="upload-form-grid">

        <div class="upload-1-language-drop-down">
            {{ macros.select_language_dropdown(language_codes, lng_recent) }}
        </div>

        <div class="upload-2-expressions">
            <div><p id="upload-2-header" class="upload-header">English</p></div>
            <textarea name="upload_text_area_left" id="upload-text-area" class="upload-text-area-left" type="text"></textarea>
              
                <div class="center-btn-container-flexbox-13">
                    <button class="btn btn-primary btn-125-font-size" type="submit">
                        Upload Examples
                    </button>
                </div>
        </div>

        <div class="upload-3-words">
            <div><p id="upload-3-header" class="upload-header">Portuguese</p></div>
            <textarea name="upload_target_word_right" class="upload-text-area-right" type="text"></textarea>
        </div>

    </div>
</form></div>

<script>

/* Script which changes the action of the form to reflect which language is being submitted */

document.getElementById("bulk-upload-form").addEventListener("submit", function(event){
    event.preventDefault()

    selectLanguage = document.getElementById("select-language");

    // Assign the hidden element the value of the most recently used language
    hiddenElementToSendToServer = selectLanguage.value;

    // Grab the value of the language selected
    languageSelected = selectLanguage.options[selectLanguage.selectedIndex].text;

    console.log(languageSelected);
    console.log(123123);

    form1234 = document.getElementById("bulk-upload-form")

    const hiddenElementWithLanguage = document.getElementById("most-recent-translation-lang").value;

    console.log(form1234.action);

    console.log(123098123);
    console.log(hiddenElementWithLanguage);

    if (languageSelected == 'English') {
        action = "upload_english/";
    } else {
        action = "upload_translations/";
    }

    let asdflkj = document.getElementById("bulk-upload-form");

    console.log(asdflkj);

    console.log(';asjdflkj');

    form1234.action = action;

    console.log(form1234.action);

    document.getElementById("bulk-upload-form").submit();

});

</script>


<script type="text/javascript" src="{{ url_for('static', filename='js/change-hidden-input-and-update-headers.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/grab-most-recent-language-and-update-select-value.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/event-listener-for-select-element-then-update-headers.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/display-language-select-container-on-window-load.js') }}"></script>

{% endblock %}